# ========= GPU/核心栈（固定到 PyTorch 2.0.1，CUDA 11.7）=========
# 使用 PyTorch 官方 cu117 源，确保拿到 GPU 版 wheel
--extra-index-url https://download.pytorch.org/whl/cu117

torch==2.0.1+cu117
torchvision==0.15.2+cu117
torchaudio==2.0.2+cu117

# ========= 常用/CPU 依赖（与你给的清单一致或等价）=========
absl-py==1.4.0
addict==2.4.0
anykeystore==0.2
brotlipy==0.7.0
cachetools==5.3.0
click==8.1.3
clip==0.2.0
colorama==0.4.6
commonmark==0.9.1
contourpy==1.0.6
cryptacular==1.6.2
cycler==0.11.0
decord==0.6.0
defusedxml==0.7.1
einops==0.5.0
filelock==3.8.0
fonttools==4.38.0
fvcore==0.1.5.post20221221
google-auth==2.17.1
google-auth-oauthlib==1.0.0
greenlet==2.0.0
grpcio==1.53.0
huggingface-hub==0.10.1
hupper==1.10.3
imageio==2.22.3
imgaug==0.4.0
iopath==0.1.10
kiwisolver==1.4.4
Markdown==3.4.1
MarkupSafe==2.1.1
matplotlib==3.6.1
mkl-fft>=1.3.8
mkl-service>=2.4.0,<2.5
# mmcv 旧版与 torch2.0 兼容性差，见下方说明；先不装：
mmcv==1.5.1
model-index==0.1.11
networkx==2.8.8
oauthlib==3.2.2
# 避免与 opencv-contrib-python 冲突，只保留一个 OpenCV：
opencv-python==4.6.0.66
openmim==0.3.2
ordered-set==4.1.0
packaging==21.3
pandas==1.5.1
PasteDeploy==3.0.1
pbkdf2==1.3
Pillow==9.2.0
plaster==1.0
plaster-pastedeploy==0.7
portalocker==2.7.0
protobuf==4.22.1
pyasn1==0.4.8
pyasn1-modules==0.2.8
Pygments==2.13.0
pyparsing==3.0.9
pyramid==2.0
pyramid-mailer==0.15.1
python-dateutil==2.8.2
python3-openid==3.2.0
pytz==2022.6
PyWavelets==1.4.1
PyYAML==6.0
repoze.sendmail==4.4.1
requests-oauthlib==1.3.1
rich==12.6.0
rsa==4.9
scikit-image==0.19.3
scipy==1.9.3
Shapely==1.8.5.post1
SQLAlchemy==1.4.42
tabulate==0.9.0
tensorboard==2.12.1
tensorboard-data-server==0.7.0
tensorboard-plugin-wit==1.8.1
termcolor==2.3.0
thop==0.1.1.post2209072238
tifffile==2022.10.10
timm==0.6.11
tqdm==4.64.1
transaction==3.0.1
translationstring==1.4
velruse==1.1.1
venusian==3.0.0
WebOb==1.8.7
Werkzeug==2.2.3
WTForms==3.0.1
wtforms-recaptcha==0.3.2
yacs==0.1.8
yapf==0.32.0
zope.deprecation==4.4.0
zope.interface==5.5.0
zope.sqlalchemy==1.6

# GPU/编译型依赖（有卡再装）
spatial-correlation-sampler==0.4.0

# torch 系列不要写死旧版本，用官方 wheel
# CUDA 12.1 (推荐新卡/A100/3090等):
# torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu121

# 如果是旧卡/驱动只能跑 CUDA 11.8，就用下面这一行：
# torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118

# ========= 需要编译/与 Torch 强相关的依赖 =========
# 官方发布的 0.4.0 对 torch2.0 兼容性差，换成上游仓库以支持新 torch：
# spatial-correlation-sampler @ git+https://github.com/sniklaus/pytorch-spatial-correlation-sampler@master

# 如必须使用 mmcv（而项目代码兼容 mmcv2）：
# 建议安装与 torch2.0 兼容的 mmcv 2.x，通过 openmim 安装（不能写进 requirements）：
#   mim install "mmcv==2.1.0"
# 如果你的项目代码只兼容 1.x，需要改造或降 torch 版本；不建议在 torch2.0.1 下强装 mmcv 1.5.1

